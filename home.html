<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Aidan Lewertoff</title>
    <link rel="stylesheet" href="style.css">
</head>
<body class="is-home">

    <a href="#" class="back-link" onclick="toggleProject(null, event)">← Retour</a>

    <header>
        <h1>Aidan</h1>
        
        <h1>Lewertoff</h1>
    </header>

    <main class="home-container">
        
        <div id="ashtable" class="project-container">
            <div class="close-handle"></div>
            
            <div class="project-details">
                <div class="project-row" onclick="toggleProject('ashtable')">
                    <div class="ribbon-home">
                        <img src="projects/ashtable/1.jpg">
                        <img src="projects/ashtable/2.jpg">
                        <img src="projects/ashtable/3.jpg">
                    </div>
                    <div class="project-title">Ashtable</div>
                </div>
                <div class="description-wrapper">
                    <p class="description">Description du projet Ashtable...</p>
                </div>
            </div>
        </div>

        <div id="hen-house" class="project-container">
            <div class="close-handle"></div>
            <div class="project-details">
                <div class="project-row" onclick="toggleProject('hen-house')">
                    <div class="ribbon-home">
                        <img src="projects/hen-house/2.jpg">
                        <img src="projects/hen-house/1.jpg">
                        <img src="projects/hen-house/4.jpg">
                        <img src="projects/hen-house/3.jpg">
                    </div>
                    <div class="project-title">Hen house</div>
                </div>
                <div class="description-wrapper">
                    <p class="description">Texte du projet HEN HOUSE...</p>
                </div>
            </div>
        </div>

        <div id="module" class="project-container">
            <div class="close-handle"></div>
            <div class="project-details">
                <div class="project-row" onclick="toggleProject('module')">
                    <div class="ribbon-home">
                        <img src="projects/module/1.jpg">
                        <img src="projects/module/2.jpg">
                        <img src="projects/module/3.jpg">
                        <img src="projects/module/4.jpg">
                        <img src="projects/module/5.jpg">
                        <img src="projects/module/6.jpg">
                        <img src="projects/module/7.jpg">
                    </div>
                    <div class="project-title">Module</div>
                </div>
                <div class="description-wrapper">
                    <p class="description">Description du projet Module...</p>
                </div>
            </div>
        </div>

        <div id="Coffeelet" class="project-container">
            <div class="close-handle"></div>
            <div class="project-details">
                <div class="project-row" onclick="toggleProject('Coffeelet')">
                    <div class="ribbon-home">
                        <img src="projects/Coffeelet/3.jpg">
                        <img src="projects/Coffeelet/1.jpg">
                        <img src="projects/Coffeelet/2.jpg">
                        
                    </div>
                    <div class="project-title">Coffeelet</div>
                </div>
                <div class="description-wrapper">
                    <p class="description">Description du projet Coffeelet...</p>
                </div>
            </div>
        </div>

        <div id="Slab" class="project-container">
            <div class="close-handle"></div>
            <div class="project-details">
                <div class="project-row" onclick="toggleProject('Slab')">
                    <div class="ribbon-home">
                        <img src="projects/slab/1.jpg">
                        <img src="projects/slab/2.jpg">
                        <img src="projects/slab/3.jpg">
                        <img src="projects/slab/4.jpg">
                    </div>
                    <div class="project-title">slab</div>
                </div>
                <div class="description-wrapper">
                    <p class="description">Description du projet Slab...</p>
                </div>
            </div>
        </div>
    
    </main>

   <footer class="main-footer">
    <div class="f-left"><a href="mailto:design@lewertoff.com">contact</a></div>
    <div class="f-right">© 2026 Aidan Lewertoff. All rights reserved.</div>
</footer>

    
<script>
document.addEventListener("DOMContentLoaded", () => {
    document.body.classList.remove('is-project');
    document.querySelectorAll('.project-container').forEach(p => { 
        p.classList.remove('active', 'closing'); 
        p.style = ""; 
    });
    document.querySelectorAll('.project-placeholder').forEach(el => el.remove());
});

let startY = 0;
let isDragging = false;
let activeProjectEl = null;

// Stocke la taille du ruban pour le retour précis
let savedRibbonSize = { w: 0, h: 0 };

function toggleProject(projectId, event) {
    if (event) event.preventDefault();
    
    const body = document.body;
    const isMobile = window.innerWidth <= 900; 
    
    if (isMobile && activeProjectEl && !projectId) { closeMobileProject(); return; }
    let target = projectId ? document.getElementById(projectId) : document.querySelector('.project-container.active');
    if (!target && isMobile && activeProjectEl) { closeMobileProject(); return; }
    if (!target) return;
    
    const ribbon = target.querySelector('.ribbon-home');

    // === OUVERTURE ===
    if (!body.classList.contains('is-project')) {
        activeProjectEl = target;
        body.dataset.scrollY = window.pageYOffset;

        // MOBILE
        if (isMobile) {
            target.classList.add('active');
            body.classList.add('is-project');
            target.scrollTop = 0;
        } 
        
        // DESKTOP
        else {
            const rect = target.getBoundingClientRect();
            const ribbonRect = ribbon.getBoundingClientRect();
            savedRibbonSize = { w: ribbonRect.width, h: ribbonRect.height };

            // Placeholder
            const ph = document.createElement('div');
            ph.className = 'project-placeholder';
            ph.id = 'ph-' + target.id;
            ph.style.height = rect.height + "px";
            ph.style.width = "100%";
            target.parentNode.insertBefore(ph, target);

            // Fixe
            target.style.transition = "none";
            target.style.position = "fixed";
            target.style.top = rect.top + "px";
            target.style.left = rect.left + "px";
            target.style.width = rect.width + "px";
            target.style.height = savedRibbonSize.h + "px"; 
            target.style.zIndex = "2000";

            ribbon.style.transition = "none";
            ribbon.style.width = savedRibbonSize.w + "px";
            ribbon.style.height = savedRibbonSize.h + "px";
            
            void target.offsetWidth; 

            // Animation
            target.classList.add('active');
            body.classList.add('is-project');

            const curve = "all 0.8s cubic-bezier(0.23, 1, 0.32, 1)";
            target.style.transition = curve;
            ribbon.style.transition = curve;

            target.style.top = "0px";
            target.style.left = "0px";
            target.style.width = "100%";
            target.style.height = "100vh";
            
            ribbon.style.width = "100vw";
            ribbon.style.height = "500px"; 
        }

    } else {
        // === FERMETURE ===
        
        if (isMobile) {
            closeMobileProject();
            return;
        }

        // DESKTOP RETOUR
        window.scrollTo(0, parseFloat(body.dataset.scrollY));

        const ph = document.getElementById('ph-' + target.id);
        const dest = ph.getBoundingClientRect(); 

        const curve = "all 0.8s cubic-bezier(0.23, 1, 0.32, 1)";
        target.style.transition = curve;
        if(ribbon) ribbon.style.transition = curve;
        
        requestAnimationFrame(() => {
            target.classList.remove('active');
            
            target.style.top = dest.top + "px";
            target.style.left = dest.left + "px";
            target.style.width = dest.width + "px";
            target.style.height = savedRibbonSize.h + "px"; 

            if(ribbon) {
                ribbon.style.width = savedRibbonSize.w + "px";
                ribbon.style.height = savedRibbonSize.h + "px";
                ribbon.style.paddingLeft = "0px";
            }
            
            setTimeout(() => { cleanUp(target, body); }, 800);
        });
    }
}

// MOBILE CLOSE
function closeMobileProject() {
    if (!activeProjectEl) return;
    const target = activeProjectEl;
    const body = document.body;
    target.style.transition = "transform 0.5s cubic-bezier(0.2, 0.8, 0.2, 1)";
    target.classList.remove('active');
    target.style.transform = ""; 
    setTimeout(() => {
        cleanUp(target, body);
        window.scrollTo(0, parseFloat(body.dataset.scrollY || 0));
    }, 500);
}

// DRAG MOBILE
window.addEventListener('touchstart', (e) => {
    if (!activeProjectEl || window.innerWidth > 900) return;
    if (activeProjectEl.scrollTop <= 0) {
        startY = e.touches[0].clientY;
        isDragging = true;
        activeProjectEl.style.transition = "none"; 
    }
}, { passive: true });

window.addEventListener('touchmove', (e) => {
    if (!isDragging || !activeProjectEl) return;
    const currentY = e.touches[0].clientY;
    const diff = currentY - startY;
    if (diff > 0 && activeProjectEl.scrollTop <= 0) {
        if (e.cancelable) e.preventDefault();
        activeProjectEl.style.transform = `translateY(${diff}px)`;
    }
}, { passive: false });

window.addEventListener('touchend', (e) => {
    if (!isDragging || !activeProjectEl) return;
    isDragging = false;
    const transform = activeProjectEl.style.transform;
    const match = transform.match(/translateY\(([^p]+)px\)/);
    const y = match ? parseFloat(match[1]) : 0;
    if (y > 100) { closeMobileProject(); } 
    else {
        activeProjectEl.style.transition = "transform 0.3s cubic-bezier(0.2, 0.8, 0.2, 1)";
        activeProjectEl.style.transform = "";
    }
});

function cleanUp(target, body) {
    body.classList.remove('is-project');
    target.classList.remove('active', 'closing');
    target.removeAttribute('style');
    const ribbon = target.querySelector('.ribbon-home');
    if(ribbon) ribbon.removeAttribute('style');
    const els = target.querySelectorAll('.description-wrapper');
    els.forEach(el => { el.removeAttribute('style'); });
    const ph = document.getElementById('ph-' + target.id);
    if(ph) ph.remove();
    document.querySelectorAll('.project-container').forEach(p => { 
        p.style = ""; p.style.opacity = "1"; p.style.pointerEvents = "auto";
    });
    activeProjectEl = null;
}

// --- SCROLL INTELLIGENT (TRACKPAD & SOURIS) ---
window.addEventListener("wheel", (evt) => {
    // Uniquement sur Desktop
    if (window.innerWidth <= 900) return; 
    
    // Uniquement si un projet est ouvert
    if (document.body.classList.contains('is-project')) {
        const activeContainer = document.querySelector('.project-container.active');
        
        if (activeContainer) {
            // Détection : Est-ce un mouvement horizontal (Trackpad) ou vertical (Souris) ?
            const isHorizontalScroll = Math.abs(evt.deltaX) > Math.abs(evt.deltaY);

            if (isHorizontalScroll) {
                // CAS 1 : TRACKPAD (Mouvement horizontal natif)
                // ON NE FAIT RIEN ! On laisse le navigateur scroller naturellement.
                // C'est ça qui débloque ton scroll "immobilisé".
                return; 
            } else {
                // CAS 2 : SOURIS (Roulette verticale)
                // Là, on intervient pour transformer le vertical en horizontal.
                evt.preventDefault();
                activeContainer.scrollLeft += (evt.deltaY * 1); // Vitesse x3
            }
        }
    }
}, { passive: false }); // Important pour que le preventDefault fonctionne sur la souris
</script>

<script>
    document.addEventListener('contextmenu', function(e) {
        // Si l'élément cliqué est une image (IMG), on bloque le menu
        if (e.target.nodeName === 'IMG') {
            e.preventDefault();
        }
    });
    
    // Optionnel : Empêcher aussi le "glisser-déposer" de l'image (drag & drop)
    document.addEventListener('dragstart', function(e) {
        if (e.target.nodeName === 'IMG') {
            e.preventDefault();
        }
    });
</script>
<script>
    document.addEventListener('keydown', function(e) {
        // Bloquer F12 (Outils de développement)
        if(e.keyCode == 123) {
            e.preventDefault();
            return false;
        }

        // Bloquer Ctrl+Shift+I (Inspecter), Ctrl+Shift+J (Console), Ctrl+Shift+C (Inspecter élément)
        // Bloquer Ctrl+U (Afficher la source)
        if (e.ctrlKey && e.shiftKey && (e.keyCode == 'I'.charCodeAt(0) || e.keyCode == 'J'.charCodeAt(0) || e.keyCode == 'C'.charCodeAt(0)) ||
            (e.ctrlKey && e.keyCode == 'U'.charCodeAt(0))) {
            e.preventDefault();
            return false;
        }
    });
</script>

</body>
</html>